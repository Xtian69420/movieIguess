<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieIGuess - Discover Amazing Movies & TV Shows</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="netflix-style.css">
    <link rel="stylesheet" href="search.css">
    <link rel="stylesheet" href="toast.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://kit.fontawesome.com/22dc8d85a3.js" crossorigin="anonymous"></script>
    <link rel="icon" href="src/icon.svg">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'netflix-red': '#E50914',
                        'netflix-black': '#000000',
                        'netflix-dark': '#141414',
                        'netflix-gray': '#333333',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-netflix-black text-white min-h-screen">
    <!-- Navigation -->
    <header class="navbar-glass fixed top-0 w-full z-50 transition-all duration-500" id="navbar">
        <div class="relative z-10 flex flex-col lg:flex-row items-center justify-between px-4 lg:px-16 py-4 space-y-4 lg:space-y-0">
            <!-- Logo and Desktop Navigation -->
            <div class="flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-8 w-full lg:w-auto">
                <h1 class="text-netflix-red text-2xl lg:text-3xl font-bold cursor-pointer hover:text-red-400 transition-colors text-center lg:text-left" onclick="home()">
                    <i class="fa-solid fa-film mr-2"></i>MovieIGuess
                </h1>
                <!-- Desktop Navigation -->
                <nav class="hidden lg:flex space-x-6">
                    <a href="#" class="text-white hover:text-gray-300 transition-colors">Home</a>
                    <a href="#" class="text-white hover:text-gray-300 transition-colors" onclick="showDevToast('Movie List')">Movies</a>
                    <a href="#" class="text-white hover:text-gray-300 transition-colors" onclick="showDevToast('TV Show List')">TV Shows</a>
                    <a href="#" class="text-white hover:text-gray-300 transition-colors" onclick="showDevToast('My List')">My List</a>
                </nav>
            </div>
            
            <!-- Search Bar -->
            <div class="flex items-center space-x-4 w-full lg:w-auto justify-center lg:justify-end">
                <div class="relative w-full max-w-md lg:w-64">
                    <input 
                        type="text" 
                        placeholder="Search a movie/series"
                        class="search-input text-white placeholder-gray-400 rounded-md px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-netflix-red focus:border-transparent transition-all"
                    >
                    <i class="fa-solid fa-magnifying-glass absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer hover:text-white transition-colors"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <div class="relative pt-16">
        <div class="backdrop-container relative h-[60vh] lg:h-[80vh] overflow-hidden">
            <div class="backdrop-slider w-full h-full bg-cover bg-center bg-no-repeat"></div>
            <!-- Gradient Overlay -->
            <div class="absolute inset-0 bg-gradient-to-t from-netflix-black via-transparent to-transparent pointer-events-none z-0"></div>
            <div class="absolute inset-0 bg-gradient-to-r from-netflix-black/80 via-transparent to-transparent pointer-events-none z-0"></div>
            
            <!-- Hero Content -->
            <div class="absolute bottom-0 left-0 p-8 lg:p-16 max-w-2xl z-10">
                <div id="hero-loading" class="animate-pulse">
                    <div class="h-12 bg-gray-600 rounded mb-4 w-3/4"></div>
                    <div class="h-6 bg-gray-600 rounded mb-6 w-full"></div>
                    <div class="flex space-x-4">
                        <div class="h-12 bg-gray-600 rounded w-32"></div>
                        <div class="h-12 bg-gray-600 rounded w-32"></div>
                    </div>
                </div>
                <div id="hero-content" class="hidden">
                    <h1 id="hero-title" class="text-4xl lg:text-6xl font-bold mb-4 leading-tight">Discover Amazing Movies</h1>
                    <p id="hero-overview" class="text-lg lg:text-xl text-gray-300 mb-6 leading-relaxed">
                        Explore thousands of movies and TV shows. Find your next favorite film today.
                    </p>
                    <div class="flex items-center mb-6 space-x-6">
                        <div id="hero-rating" class="flex items-center text-yellow-400">
                            <i class="fa-solid fa-star mr-2"></i>
                            <span class="text-white text-lg font-semibold">0.0</span>
                        </div>
                        <div id="hero-year" class="text-gray-300 text-lg">
                            2024
                        </div>
                        <div id="hero-runtime" class="text-gray-300 text-lg">
                            <!-- Runtime will be added here -->
                        </div>
                    </div>
                    <div class="flex space-x-4">
                        <button id="hero-play-btn" class="netflix-button bg-white text-black px-8 py-3 rounded font-semibold hover:bg-gray-200 transition-colors flex items-center">
                            <i class="fa-solid fa-play mr-2"></i>
                            Play
                        </button>
                        <button id="hero-info-btn" class="netflix-button bg-gray-600/70 text-white px-8 py-3 rounded font-semibold hover:bg-gray-600 transition-colors flex items-center">
                            <i class="fa-solid fa-info-circle mr-2"></i>
                            More Info
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Sections -->
    <div class="px-4 lg:px-16 space-y-12 pb-20">
        <!-- Trending Movies -->
        <section>
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl lg:text-3xl font-bold flex items-center">
                    <i class="fa-solid fa-fire text-netflix-red mr-3"></i>
                    Trending Movies
                </h2>
                <button class="text-netflix-red hover:text-red-400 transition-colors font-semibold" onclick="showDevToast('Trending Movies')">
                    See All <i class="fa-solid fa-chevron-right ml-1"></i>
                </button>
            </div>
            <div class="scroll-wrapper overflow-hidden">
                <div class="movie-container flex space-x-4 overflow-x-auto scrollbar-hide pb-4">
                    <!-- Movies will be populated here -->
                </div>
            </div>
        </section>

        <!-- Popular TV Shows -->
        <section>
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl lg:text-3xl font-bold flex items-center">
                    <i class="fa-solid fa-tv text-netflix-red mr-3"></i>
                    Popular TV Shows
                </h2>
                <button class="text-netflix-red hover:text-red-400 transition-colors font-semibold" onclick="showDevToast('Popular TV Shows')">
                    See All <i class="fa-solid fa-chevron-right ml-1"></i>
                </button>
            </div>
            <div class="scroll-wrapper overflow-hidden">
                <div class="series-container flex space-x-4 overflow-x-auto scrollbar-hide pb-4">
                    <!-- TV Shows will be populated here -->
                </div>
            </div>
        </section>

        <!-- Top Rated -->
        <section>
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl lg:text-3xl font-bold flex items-center">
                    <i class="fa-solid fa-star text-netflix-red mr-3"></i>
                    16+
                </h2>
                <button class="text-netflix-red hover:text-red-400 transition-colors font-semibold" onclick="showDevToast('Top Rated')">
                    See All <i class="fa-solid fa-chevron-right ml-1"></i>
                </button>
            </div>
            <div class="scroll-wrapper overflow-hidden">
                <div class="anime-container flex space-x-4 overflow-x-auto scrollbar-hide pb-4">
                    <!-- Top rated content will be populated here -->
                </div>
            </div>
        </section>
    </div>
    
    <!-- Search Modal -->
    <div id="searchModal" class="search-modal-overlay hidden">
        <div class="search-modal-card">
            <!-- Search Header -->
            <div class="search-header">
                <!-- Close Button -->
                <button id="searchCloseBtn" class="absolute top-4 right-4 z-10 bg-black bg-opacity-50 rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-75 transition-all">
                    <i class="fa-solid fa-times text-white text-lg"></i>
                </button>
                
                <h2 id="searchResultsTitle">Search Results</h2>
                <div class="search-filters">
                    <button class="filter-btn active" data-type="all">All</button>
                    <button class="filter-btn" data-type="movie">Movies</button>
                    <button class="filter-btn" data-type="tv">TV Shows</button>
                    <button class="filter-btn" data-type="person">People</button>
                </div>
            </div>
            
            <!-- Search Results Container -->
            <div id="searchResultsContainer" class="search-results-container">
                <div class="loading">Loading...</div>
            </div>
            
            <!-- Pagination Container -->
            <div id="searchPaginationContainer" class="pagination-container"></div>
        </div>
    </div>
    
    <!-- Movie Info Modal -->
    <div id="movieModal" class="fixed inset-0 z-50 hidden">
        <!-- Modal Backdrop -->
        <div class="fixed inset-0 bg-black bg-opacity-75 transition-opacity" onclick="closeModal()"></div>
        
        <!-- Modal Content -->
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="modal-content bg-netflix-dark rounded-lg max-w-4xl w-full max-h-[90vh] relative flex flex-col">
                <!-- Close Button -->
                <button onclick="closeModal()" class="absolute top-4 right-4 z-10 bg-black bg-opacity-50 rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-75 transition-all">
                    <i class="fa-solid fa-times text-white text-lg"></i>
                </button>
                
                <!-- Modal Header with Backdrop -->
                <div class="relative h-64 lg:h-80 overflow-hidden rounded-t-lg flex-shrink-0">
                    <img id="modalBackdrop" src="" alt="" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-netflix-dark via-transparent to-transparent"></div>
                    
                    <!-- Movie Info Overlay -->
                    <div class="absolute bottom-0 left-0 right-0 p-6 lg:p-8">
                        <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between">
                            <div class="flex-1">
                                <h2 id="modalTitle" class="text-3xl lg:text-4xl font-bold text-white mb-2"></h2>
                                <div class="flex items-center flex-wrap gap-x-4 gap-y-2 text-sm lg:text-base mb-4 lg:mb-0">
                                    <span id="modalRating" class="flex items-center text-yellow-400">
                                        <i class="fa-solid fa-star mr-1"></i>
                                        <span class="text-white">0.0</span>
                                    </span>
                                    <span id="modalYear" class="text-gray-300"></span>
                                    <span id="modalRuntime" class="text-gray-300"></span>
                                    <div class="flex items-center space-x-2 ml-2 lg:hidden">
                                        <button id="playTrailerBtn" onclick="playTrailer()" class="bg-netflix-red hover:bg-red-700 text-white px-3 py-2 lg:px-4 lg:py-2 rounded-lg font-semibold transition-colors flex items-center text-xs lg:text-base">
                                            <i class="fa-solid fa-play mr-1 lg:mr-2 text-xs lg:text-sm"></i>
                                            <span class="hidden sm:inline">Play Trailer</span>
                                            <span class="sm:hidden">Play Trailer</span>
                                        </button>
                                        <button id="muteBtn" onclick="toggleMute()" class="w-8 h-8 lg:w-10 lg:h-10 bg-gray-900/70 hover:bg-gray-800/70 text-white rounded-full font-semibold transition-colors flex items-center justify-center border-2 border-white/20 hidden">
                                            <i class="fa-solid fa-volume-xmark text-xs lg:text-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Desktop buttons on the right -->
                            <div class="hidden lg:flex items-center space-x-2">
                                <button id="playTrailerBtnDesktop" onclick="playTrailer()" class="bg-netflix-red hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors flex items-center text-base">
                                    <i class="fa-solid fa-play mr-2 text-sm"></i>
                                    Play Trailer
                                </button>
                                <button id="muteBtnDesktop" onclick="toggleMute()" class="w-10 h-10 bg-gray-900/70 hover:bg-gray-800/70 text-white rounded-full font-semibold transition-colors flex items-center justify-center border-2 border-white/20 hidden">
                                    <i class="fa-solid fa-volume-xmark text-sm"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal Body - Scrollable Content -->
                <div class="flex-1 overflow-y-auto modal-scrollable-content">
                    <div class="p-6 lg:p-8">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Movie Poster -->
                        <div class="lg:col-span-1">
                            <img id="modalPoster" src="" alt="" class="w-full rounded-lg shadow-lg">
                        </div>
                        
                        <!-- Movie Details -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- Overview -->
                            <div>
                                <h3 class="text-xl font-semibold text-white mb-3">Overview</h3>
                                <p id="modalOverview" class="text-gray-300 leading-relaxed"></p>
                            </div>
                            
                            <!-- Additional Info -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h4 class="text-lg font-semibold text-white mb-2">Details</h4>
                                    <div class="space-y-2 text-gray-300">
                                        <p><span class="text-white font-medium">Release Date:</span> <span id="modalReleaseDate"></span></p>
                                        <p><span class="text-white font-medium">Genres:</span> <span id="modalGenres"></span></p>
                                        <p><span class="text-white font-medium">Runtime:</span> <span id="modalRuntimeDetail"></span></p>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-white mb-2">Additional Info</h4>
                                    <div class="space-y-2 text-gray-300">
                                        <p><span class="text-white font-medium">Rating:</span> <span id="modalRatingDetail"></span></p>
                                        <p><span class="text-white font-medium">Vote Count:</span> <span id="modalVoteCount"></span></p>
                                        <p><span class="text-white font-medium">Language:</span> <span id="modalLanguage"></span></p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="flex space-x-4 pt-4">
                                <button id="modalPlayBtn" class="netflix-button bg-netflix-red text-white px-8 py-3 rounded font-semibold hover:bg-red-700 transition-colors flex items-center">
                                    <i class="fa-solid fa-play mr-2"></i>
                                    Watch Now
                                </button>
                                <button id="modalAddToListBtn" onclick="showDevToast('Add to List')" class="netflix-button bg-gray-600 text-white px-8 py-3 rounded font-semibold hover:bg-gray-500 transition-colors flex items-center">
                                    <i class="fa-solid fa-plus mr-2"></i>
                                    Add to List
                                </button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-netflix-dark mt-20 py-16">
        <div class="px-4 lg:px-16">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <h3 class="text-netflix-red text-2xl font-bold mb-4">MovieIGuess</h3>
                    <p class="text-gray-400 mb-6 max-w-md">
                        Your ultimate destination for discovering amazing movies and TV shows. 
                        Stream, watch, and enjoy entertainment like never before.
                    </p>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors" onclick="showDevToast('Movie List')">Movies</a></li>
                        <li><a href="#" class="hover:text-white transition-colors" onclick="showDevToast('TV Show List')">TV Shows</a></li>
                        <li><a href="#" class="hover:text-white transition-colors" onclick="showDevToast('My List')">My List</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Browse</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">Connect With Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" onclick="ins()" class="text-gray-400 hover:text-netflix-red transition-colors">
                            <i class="fa-brands fa-instagram text-2xl"></i>
                        </a>
                        <a href="#" onclick="lin()" class="text-gray-400 hover:text-netflix-red transition-colors">
                            <i class="fa-brands fa-linkedin-in text-2xl"></i>
                        </a>
                        <a href="#" onclick="git()" class="text-gray-400 hover:text-netflix-red transition-colors">
                            <i class="fa-brands fa-github text-2xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-12 pt-8 text-center">
                <p class="text-gray-400">&copy; 2024 MovieIGuess. All rights reserved. | Privacy Policy | Terms of Service</p>
            </div>
        </div>
    </footer>

    <script src="./src/loading.js"></script>
    <script src="./src/home.js"></script>
    <script src="src/search.js"></script>
    
    <script>
        // Footer functions
        function ins(){window.open('https://www.instagram.com/unkown-user/', '_blank');}
        function lin(){window.open('https://www.linkedin.com/in/christian-signo-070733323/', '_blank')}
        function git(){window.open('https://github.com/Xtian69420', '_blank')}

        function home(){
            window.location.href="index.html";
        }

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Smooth horizontal scrolling for movie containers
        function setupHorizontalScroll() {
            const containers = document.querySelectorAll('.movie-container, .series-container, .anime-container');
            
            containers.forEach(container => {
                container.addEventListener('wheel', (e) => {
                    if (e.deltaY !== 0) {
                        e.preventDefault();
                        container.scrollLeft += e.deltaY * 2;
                    }
                });

                // Touch scrolling for mobile
                let isDown = false;
                let startX;
                let scrollLeft;

                container.addEventListener('mousedown', (e) => {
                    isDown = true;
                    container.style.cursor = 'grabbing';
                    startX = e.pageX - container.offsetLeft;
                    scrollLeft = container.scrollLeft;
                });

                container.addEventListener('mouseleave', () => {
                    isDown = false;
                    container.style.cursor = 'grab';
                });

                container.addEventListener('mouseup', () => {
                    isDown = false;
                    container.style.cursor = 'grab';
                });

                container.addEventListener('mousemove', (e) => {
                    if (!isDown) return;
                    e.preventDefault();
                    const x = e.pageX - container.offsetLeft;
                    const walk = (x - startX) * 2;
                    container.scrollLeft = scrollLeft - walk;
                });

                // Touch events for mobile
                container.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].pageX - container.offsetLeft;
                    scrollLeft = container.scrollLeft;
                });

                container.addEventListener('touchmove', (e) => {
                    if (!startX) return;
                    const x = e.touches[0].pageX - container.offsetLeft;
                    const walk = (x - startX) * 2;
                    container.scrollLeft = scrollLeft - walk;
                });
            });
        }

        // Initialize after DOM is loaded
        document.addEventListener('DOMContentLoaded', setupHorizontalScroll);

        // Global variable to store current movie trailer
        let currentMovieTrailer = null;
        let currentMovieBackdrop = null;
        let isTrailerMuted = true; // Start muted by default

        // Function to fetch movie or TV show trailer
        async function fetchMovieTrailer(movieId, mediaType = 'movie') {
            try {
                const API_KEY = '97df57ffd9278a37bc12191e00332053';
                const endpoint = mediaType === 'tv' ? 'tv' : 'movie';
                const response = await fetch(`https://api.themoviedb.org/3/${endpoint}/${movieId}/videos?api_key=${API_KEY}`);
                const data = await response.json();
                
                // Find the first YouTube trailer
                const trailer = data.results.find(video => 
                    video.type === 'Trailer' && video.site === 'YouTube'
                );
                
                return trailer;
            } catch (error) {
                console.error('Error fetching trailer:', error);
                return null;
            }
        }

        // Function to play trailer in modal backdrop
        function playTrailer() {
            if (!currentMovieTrailer) {
                showDevToast('Trailer not available for this content');
                return;
            }

            const modalBackdrop = document.getElementById('modalBackdrop');
            const playTrailerBtn = document.getElementById('playTrailerBtn');
            const playTrailerBtnDesktop = document.getElementById('playTrailerBtnDesktop');
            const muteBtn = document.getElementById('muteBtn');
            const muteBtnDesktop = document.getElementById('muteBtnDesktop');
            
            if (modalBackdrop) {
                // Replace backdrop image with YouTube iframe (no controls, autoplay, muted initially)
                modalBackdrop.outerHTML = `
                    <div id="modalBackdrop" class="w-full h-full relative overflow-hidden">
                        <iframe 
                            id="trailerIframe"
                            src="https://www.youtube.com/embed/${currentMovieTrailer.key}?autoplay=1&mute=1&controls=0&showinfo=0&rel=0&modestbranding=1&iv_load_policy=3&fs=0&disablekb=1&enablejsapi=1&cc_load_policy=0&playsinline=1&widget_referrer=https%3A%2F%2Fwww.netflix.com"
                            class="absolute inset-0 w-full h-full"
                            style="width: 170%; height: 170%; left: -35%; top: -35%; object-fit: cover;"
                            allowfullscreen
                            allow="autoplay; encrypted-media">
                        </iframe>
                    </div>
                `;
                
                // Update mobile buttons
                if (playTrailerBtn) {
                    playTrailerBtn.innerHTML = `
                        <i class="fa-solid fa-stop mr-1 lg:mr-2 text-xs lg:text-sm"></i>
                        <span class="hidden sm:inline">Stop Trailer</span>
                        <span class="sm:hidden">Stop</span>
                    `;
                    playTrailerBtn.onclick = stopTrailer;
                }
                
                // Update desktop buttons
                if (playTrailerBtnDesktop) {
                    playTrailerBtnDesktop.innerHTML = `
                        <i class="fa-solid fa-stop mr-2 text-sm"></i>
                        Stop Trailer
                    `;
                    playTrailerBtnDesktop.onclick = stopTrailer;
                }
                
                // Show mute buttons
                if (muteBtn) {
                    muteBtn.classList.remove('hidden');
                    muteBtn.classList.add('flex');
                    muteBtn.innerHTML = '<i class="fa-solid fa-volume-xmark text-xs lg:text-sm"></i>';
                }
                
                if (muteBtnDesktop) {
                    muteBtnDesktop.classList.remove('hidden');
                    muteBtnDesktop.classList.add('flex');
                    muteBtnDesktop.innerHTML = '<i class="fa-solid fa-volume-xmark text-sm"></i>';
                }
            }
        }

        // Function to stop trailer and restore backdrop
        function stopTrailer() {
            const modalBackdrop = document.getElementById('modalBackdrop');
            const playTrailerBtn = document.getElementById('playTrailerBtn');
            const playTrailerBtnDesktop = document.getElementById('playTrailerBtnDesktop');
            const muteBtn = document.getElementById('muteBtn');
            const muteBtnDesktop = document.getElementById('muteBtnDesktop');
            
            if (modalBackdrop && currentMovieBackdrop) {
                // Restore original backdrop image
                modalBackdrop.outerHTML = `<img id="modalBackdrop" src="${currentMovieBackdrop}" alt="" class="w-full h-full object-cover">`;
                
                // Update mobile buttons back to play state
                if (playTrailerBtn) {
                    playTrailerBtn.innerHTML = `
                        <i class="fa-solid fa-play mr-1 lg:mr-2 text-xs lg:text-sm"></i>
                        <span class="hidden sm:inline">Play Trailer</span>
                        <span class="sm:hidden">Play Trailer</span>
                    `;
                    playTrailerBtn.onclick = playTrailer;
                }
                
                // Update desktop buttons back to play state
                if (playTrailerBtnDesktop) {
                    playTrailerBtnDesktop.innerHTML = `
                        <i class="fa-solid fa-play mr-2 text-sm"></i>
                        Play Trailer
                    `;
                    playTrailerBtnDesktop.onclick = playTrailer;
                }
                
                // Hide mute buttons
                if (muteBtn) {
                    muteBtn.classList.add('hidden');
                    muteBtn.classList.remove('flex');
                }
                
                if (muteBtnDesktop) {
                    muteBtnDesktop.classList.add('hidden');
                    muteBtnDesktop.classList.remove('flex');
                }
                
                // Reset mute state
                isTrailerMuted = true;
            }
        }

        // Function to toggle mute/unmute
        function toggleMute() {
            const trailerIframe = document.getElementById('trailerIframe');
            const muteBtn = document.getElementById('muteBtn');
            const muteBtnDesktop = document.getElementById('muteBtnDesktop');
            
            if (trailerIframe) {
                try {
                    // Use postMessage to communicate with YouTube iframe
                    if (isTrailerMuted) {
                        // Unmute
                        trailerIframe.contentWindow.postMessage('{"event":"command","func":"unMute","args":""}', '*');
                        
                        // Update both button icons
                        if (muteBtn) {
                            muteBtn.innerHTML = '<i class="fa-solid fa-volume-high text-xs lg:text-sm"></i>';
                        }
                        if (muteBtnDesktop) {
                            muteBtnDesktop.innerHTML = '<i class="fa-solid fa-volume-high text-sm"></i>';
                        }
                        isTrailerMuted = false;
                    } else {
                        // Mute
                        trailerIframe.contentWindow.postMessage('{"event":"command","func":"mute","args":""}', '*');
                        
                        // Update both button icons
                        if (muteBtn) {
                            muteBtn.innerHTML = '<i class="fa-solid fa-volume-xmark text-xs lg:text-sm"></i>';
                        }
                        if (muteBtnDesktop) {
                            muteBtnDesktop.innerHTML = '<i class="fa-solid fa-volume-xmark text-sm"></i>';
                        }
                        isTrailerMuted = true;
                    }
                } catch (error) {
                    console.log('YouTube API not available, using fallback method');
                    // Fallback: Just update button state without reloading iframe
                    if (isTrailerMuted) {
                        if (muteBtn) {
                            muteBtn.innerHTML = '<i class="fa-solid fa-volume-high text-xs lg:text-sm"></i>';
                        }
                        if (muteBtnDesktop) {
                            muteBtnDesktop.innerHTML = '<i class="fa-solid fa-volume-high text-sm"></i>';
                        }
                        isTrailerMuted = false;
                    } else {
                        if (muteBtn) {
                            muteBtn.innerHTML = '<i class="fa-solid fa-volume-xmark text-xs lg:text-sm"></i>';
                        }
                        if (muteBtnDesktop) {
                            muteBtnDesktop.innerHTML = '<i class="fa-solid fa-volume-xmark text-sm"></i>';
                        }
                        isTrailerMuted = true;
                    }
                }
            }
        }
    </script>

<!-- Removed: legacy geolocation + external API tracking (CORS issues) -->

<script>
    //for category
    const scrollWrapper1 = document.querySelector('.movie-container');
    const scrollWrapper2 = document.querySelector('.series-container');
    const scrollWrapper3 = document.querySelector('.anime-container');

    // Enhanced scroll functionality will be handled in the main script above
</script>

<style>
    /* Custom scrollbar styles */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
    
    /* Custom movie card hover effects */
    .movie-card, .series-card, .anime-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .movie-card:hover, .series-card:hover, .anime-card:hover {
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
        z-index: 10;
    }

    /* Smooth backdrop transitions */
    .backdrop-slider {
        transition: opacity 1s ease-in-out;
    }

    /* Custom gradient overlay */
    .hero-gradient {
        background: linear-gradient(
            90deg,
            rgba(0, 0, 0, 0.8) 0%,
            rgba(0, 0, 0, 0.4) 50%,
            rgba(0, 0, 0, 0.1) 100%
        );
    }

    /* Hero loading animation */
    @keyframes pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.5;
        }
    }

    .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    /* Hero content transitions */
    #hero-content {
        animation: fadeInUp 0.8s ease-out;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Enhanced button hover effects */
    .netflix-button {
        position: relative;
        overflow: hidden;
    }

    .netflix-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
    }

    .netflix-button:hover::before {
        left: 100%;
    }

    /* Mobile navigation improvements */
    @media (max-width: 1024px) {
        .navbar-glass {
            padding-top: 1rem;
            padding-bottom: 1rem;
            /* Keep the same glassmorphism as desktop; no opaque overrides */
        }
        
        /* Do not override #navbar background on mobile so it keeps glass effect */
        
        .search-input {
            font-size: 16px; /* Prevents zoom on iOS */
        }
    }

    /* Ensure Play button stays white on small screens if any mobile theming interferes */
    @media (max-width: 640px) {
        #hero-play-btn {
            background-color: #ffffff !important;
            color: #000000 !important;
        }
    }

    /* Extra margin for very small screens to prevent header overlap */
    @media (max-width: 1023px) {
        .pt-16 {
            padding-top: 6rem !important; /* Increase from default 4rem to 6rem */
        }
        
        /* Alternative: add margin to hero section specifically */
        .backdrop-container {
            margin-top: 2rem;
        }
        
        /* Truncate hero description to ~25 characters on very small screens */
        #hero-overview {
            display: -webkit-box;
            -webkit-line-clamp: 1;
            line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 25ch; /* Approximately 25 characters */
        }
    }

    /* Modal improvements */
    .modal-content {
        animation: modalFadeIn 0.3s ease-out;
    }

    @keyframes modalFadeIn {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Prevent body scroll when modal is open */
    .modal-open {
        overflow: hidden;
    }

    /* Mobile Modal Button Improvements - Under 500px */
    @media (max-width: 500px) {
        /* Modal button container */
        .modal-content .flex.space-x-4 {
            flex-direction: column;
            gap: 12px;
            align-items: stretch;
        }
        
        /* Modal buttons */
        .modal-content .netflix-button {
            width: 100%;
            padding: 14px 20px;
            font-size: 14px;
            justify-content: center;
            text-align: center;
            margin: 0 !important;
            margin-left: 0 !important;
            margin-right: 0 !important;
        }
        
        /* Button icons */
        .modal-content .netflix-button i {
            margin-right: 8px;
            margin-left: 0;
        }
        
        /* Remove any default margins on mobile buttons */
        .modal-content .netflix-button {
            margin: 0;
        }
        
        /* Override TailwindCSS space-x margins on mobile */
        .modal-content .flex.space-x-4 > * {
            margin-left: 0 !important;
            margin-right: 0 !important;
        }
        
        /* Modal content padding adjustments */
        .modal-content .p-6.lg\\:p-8 {
            padding: 16px;
        }
        
        /* Modal grid layout for mobile */
        .modal-content .grid.grid-cols-1.lg\\:grid-cols-3 {
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        /* Modal poster size adjustment */
        .modal-content .lg\\:col-span-1 img {
            max-width: 200px;
            margin: 0 auto;
        }
        
        /* Action buttons section */
        .modal-content .flex.space-x-4.pt-4 {
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
    }
</style>

<!-- Toast Script -->
<script src="src/toast.js"></script>
<script>
    // Development toast function
    function showDevToast(feature) {
        showInfo(`${feature} feature is currently in development. Stay tuned for updates! :PP`, {
            title: 'ðŸš§ Coming Soon :PP',
            duration: 4000
        });
    }
</script>

</body>
</html>
